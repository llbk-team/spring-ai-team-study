# Java λλ‹¤μ‹(Lambda Expression)κ³Ό ν•¨μν• μΈν„°νμ΄μ¤

## 1. map()μ€ μ™ λλ‹¤μ‹μ„ λ°›μ„ μ μλ‚μ”?

`Flux`μ `map()` λ©”μ„λ“ μ‹κ·Έλ‹μ²λ¥Ό λ³΄λ©΄:

```java
public <V> Flux<V> map(Function<? super T, ? extends V> mapper)
```

**Function<T, R>λ” ν•¨μν• μΈν„°νμ΄μ¤**

```java
@FunctionalInterface
public interface Function<T, R> {
    R apply(T t);  // μ¶”μƒ λ©”μ„λ“κ°€ λ”± 1κ°!
}
```

---

## 2. λλ‹¤μ‹μ„ μ‚¬μ©ν•  μ μλ” μ΅°κ±΄

### β… μ¤μ§ ν•¨μν• μΈν„°νμ΄μ¤μ—λ§ μ‚¬μ© κ°€λ¥!

**ν•¨μν• μΈν„°νμ΄μ¤ μ΅°κ±΄:**
* μ¶”μƒ λ©”μ„λ“κ°€ μ •ν™•ν 1κ° μμ–΄μ•Ό ν•λ‹¤
* `@FunctionalInterface` μ–΄λ…Έν…μ΄μ…μ€ μ„ νƒμ‚¬ν•­
* μΈν„°νμ΄μ¤μ—¬μ•Ό ν•λ‹¤

**μ¤‘μ”ν• κµ¬λ¶„:**
* **λλ‹¤μ‹μ λ€μƒ**: λ°λ“μ‹ ν•¨μν• μΈν„°νμ΄μ¤! (`Function<T,R>`, `Predicate<T>` λ“±)
* **λλ‹¤μ‹μ λ§¤κ°λ³€μ**: μΌλ° ν΄λμ¤, μ¶”μƒ ν΄λμ¤ μƒμ†, μΈν„°νμ΄μ¤ κµ¬ν„ λ¨λ‘ OK

---

## 3. chatResponseκ°€ λ§¤κ°λ³€μλ΅ μ‚¬μ©λλ” μ›λ¦¬

```java
Flux<String> fluxstring = fluxChatResponse.map(chatResponse -> {
    AssistantMessage assistantMessage = chatResponse.getResult().getOutput();
    String str = assistantMessage.getText();
    return str;
});
```

**λ™μ‘ μ›λ¦¬:**

1. `map()`μ€ `Function<ChatResponse, String>` νƒ€μ…μ„ κΈ°λ€
2. λλ‹¤μ‹ `chatResponse -> {...}`λ” Function μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μµλ…κ°μ²΄ μƒμ„±
3. `chatResponse`λ” Functionμ `apply(T t)` λ©”μ„λ“μ λ§¤κ°λ³€μ
4. ν™”μ‚΄ν‘ `β†’` μ¤λ¥Έμ½μ€ `apply()` λ©”μ„λ“μ κµ¬ν„λ¶€

```
fluxChatResponse.map(chatResponse -> {...})
                      β†“
     Function<ChatResponse, String> κµ¬ν„
                      β†“
     apply(ChatResponse chatResponse) λ©”μ„λ“μ λ§¤κ°λ³€μλ΅ μ „λ‹¬λ¨
```

---

## 4. λ§¤κ°λ³€μκ°€ μ—†λ” κ²½μ°: () β†’ {...}

```java
// λ§¤κ°λ³€μ μ—†λ” ν•¨μν• μΈν„°νμ΄μ¤
@FunctionalInterface
interface Supplier<T> {
    T get();  // λ§¤κ°λ³€μ μ—†μ
}

// μ‚¬μ© μμ‹
Supplier<String> supplier = () -> {
    return "Hello";
};

// μ΄κ²ƒλ„ κ°€λ¥ (μ¤‘κ΄„νΈ μƒλµ)
Supplier<String> supplier2 = () -> "Hello";
```

---

## 5. ChatResponseκ°€ μ¶”μƒ ν΄λμ¤λ‚ μΈν„°νμ΄μ¤κ°€ μ•„λ‹λ°...?

### β… chatResponseλ” ChatResponse ν΄λμ¤μ μΈμ¤ν„΄μ¤(κ°μ²΄)μ…λ‹λ‹¤!

**λλ‹¤μ‹μ΄ κ°€λ¥ν• μ΄μ :**
* `map()`μ΄ ν•¨μν• μΈν„°νμ΄μ¤(`Function`)λ¥Ό λ°›κΈ° λ•λ¬Έ!
* `chatResponse`λ” κ·Έ ν•¨μν• μΈν„°νμ΄μ¤μ λ©”μ„λ“ λ§¤κ°λ³€μμΌ λΏ

**λλ‹¤μ‹μ λ€μƒ vs λ§¤κ°λ³€μ:**
* **λλ‹¤μ‹μ λ€μƒ**: λ°λ“μ‹ ν•¨μν• μΈν„°νμ΄μ¤ (μ: `Function`, `Predicate`)
* **λ§¤κ°λ³€μ**: μ–΄λ–¤ νƒ€μ…μ΄λ“  κ°€λ¥ (μΌλ° ν΄λμ¤, μΈν„°νμ΄μ¤, μ¶”μƒ ν΄λμ¤ λ“±)

---

## 6. μµλ… κµ¬ν„ κ°μ²΄ vs λλ‹¤μ‹

### 1οΈβƒ£ μµλ… κµ¬ν„ κ°μ²΄ (Anonymous Implementation Object)

#### β… μ¶”μƒ ν΄λμ¤ μƒμ† - κ°€λ¥

```java
abstract class Animal {
    abstract void sound();
    void sleep() {
        System.out.println("μ μκΈ°");
    }
}

// β… μµλ… κµ¬ν„ κ°μ²΄λ΅ μ¶”μƒ ν΄λμ¤ μƒμ†
Animal dog = new Animal() {
    @Override
    void sound() {
        System.out.println("λ©λ©");
    }
};
dog.sound();  // μ¶λ ¥: λ©λ©
dog.sleep();  // μ¶λ ¥: μ μκΈ°
```

#### β… μΈν„°νμ΄μ¤ κµ¬ν„ - κ°€λ¥ (ν•¨μν•μ΄λ“  μ•„λ‹λ“ )

```java
// μΌλ° μΈν„°νμ΄μ¤ (μ¶”μƒ λ©”μ„λ“ 2κ°)
interface MyInterface {
    void method1();
    void method2();
}

// β… μµλ… κµ¬ν„ κ°μ²΄λ΅ μΈν„°νμ΄μ¤ κµ¬ν„
MyInterface obj = new MyInterface() {
    @Override
    public void method1() {
        System.out.println("λ©”μ„λ“1");
    }
    
    @Override
    public void method2() {
        System.out.println("λ©”μ„λ“2");
    }
};
```

#### β… ν•¨μν• μΈν„°νμ΄μ¤ κµ¬ν„ - κ°€λ¥

```java
@FunctionalInterface
interface Calculator {
    int calculate(int a, int b);
}

// β… μµλ… κµ¬ν„ κ°μ²΄ μ‚¬μ© κ°€λ¥
Calculator calc = new Calculator() {
    @Override
    public int calculate(int a, int b) {
        return a + b;
    }
};
```

### 2οΈβƒ£ λλ‹¤μ‹ (Lambda Expression)

#### β… ν•¨μν• μΈν„°νμ΄μ¤ - κ°€λ¥ (μ¤μ§ μ΄κ²ƒλ§!)

```java
@FunctionalInterface
interface Calculator {
    int calculate(int a, int b);
}

// β… λλ‹¤μ‹ μ‚¬μ©
Calculator calc = (a, b) -> a + b;

// β μΌλ° μΈν„°νμ΄μ¤λ” λλ‹¤μ‹ λ¶κ°€
interface MyInterface {
    void method1();
    void method2();  // μ¶”μƒ λ©”μ„λ“κ°€ 2κ°λΌμ„ λ¶κ°€!
}

// MyInterface obj = () -> {...};  // β μ»΄νμΌ μ—λ¬!
```

---

## π“ μ”μ•½

| κµ¬λ¶„ | μµλ… κµ¬ν„ κ°μ²΄ | λλ‹¤μ‹ |
|------|----------------|--------|
| **μ¶”μƒ ν΄λμ¤** | β… κ°€λ¥ | β λ¶κ°€λ¥ |
| **μΌλ° μΈν„°νμ΄μ¤** | β… κ°€λ¥ | β λ¶κ°€λ¥ |
| **ν•¨μν• μΈν„°νμ΄μ¤** | β… κ°€λ¥ | β… κ°€λ¥ (μ¤μ§ μ΄κ²ƒλ§!) |
| **μ΅°κ±΄** | μ μ•½ μ—†μ | μ¶”μƒ λ©”μ„λ“κ°€ μ •ν™•ν 1κ° |

**ν•µμ‹¬ ν¬μΈνΈ:**
* λλ‹¤μ‹μ€ ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ°„κ²°ν• λ°©λ²•
* λλ‹¤μ‹μ λ§¤κ°λ³€μλ” μ–΄λ–¤ νƒ€μ…μ΄λ“  κ°€λ¥ (μΌλ° ν΄λμ¤, μΈν„°νμ΄μ¤ λ“±)
* λλ‹¤μ‹ μμ²΄λ” ν•¨μν• μΈν„°νμ΄μ¤λ§ λ€μƒμΌλ΅ ν•  μ μμ