# 핵심 요약

📁 파일 리소스 처리

Spring AI에서 이미지·비디오 전송 시 파일 이름(fileName)은 필수

🔹 Resource 인터페이스

파일, 이미지, InputStream 등 다양한 형태의 외부 자원을 추상화한 통합 인터페이스

파일 시스템, 클래스패스, 네트워크 등 다양한 경로의 데이터를 통일된 방식으로 다룸

🔹 ByteArrayResource 클래스

Resource의 구현체 중 하나로,
메모리에 존재하는 byte[] 데이터를 파일처럼 다룰 수 있게 해주는 클래스

실제 파일을 생성하지 않고도 Spring에서 업로드·분석용 리소스로 전달 가능

주로 이미지, 오디오, 비디오 데이터를 메모리에서 직접 처리할 때 사용됨

🎞️ 비디오 프레임 분석

비디오는 여러 이미지(프레임)의 연속 구조
→ LLM은 “전체 영상”보다 특정 시점의 프레임 단위 분석이 훨씬 효율적

⚙️ 프레임 추출 방식

<video> 엘리먼트를 <canvas>에 그린 뒤,
canvas.toBlob()을 통해 현재 프레임을 PNG 형식의 Blob 데이터로 변환

변환된 Blob은 formData.append('attach', blob, 'frame.png') 형태로 서버에 전송

🧭 캔버스 오버레이 및 좌표 처리

<canvas>는 투명한 오버레이 레이어로 활용

이미지 위에서 마우스 드래그 시 사각형 표시

해당 영역을 선택해 편집·분석·보정 등의 대상 지정 가능

좌표계 기준

좌상단이 (0, 0)

x는 오른쪽 방향, y는 아래 방향으로 증가

크기 일치 원칙

이미지와 캔버스의 폭·높이는 항상 동일해야 함

브라우저 창 크기(window.resize) 변경 시,
resizeCanvas() 함수를 통해 캔버스도 자동으로 리사이즈

🔄 리액티브 프로그래밍 요소 (Spring WebFlux)

Mono<T> → 단일 데이터 흐름 (0~1개)

Flux<T> → 복수 데이터 흐름 (0~N개)

.block() → 비동기 처리 결과를 동기식으로 대기하며 반환
(예: AI 모델 응답을 실시간으로 받아야 할 때 사용)