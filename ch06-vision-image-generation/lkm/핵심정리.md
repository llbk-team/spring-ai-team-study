# 핵심 요약

### 이미지 분석/생성/편집 + 비디오 분석

> **이미지 분석**
> 
- **Resource 객체 생성**
    
    이미지 데이터를 바이트 배열로 처리하여 ByteArrayResource로 생성
    

> **이미지 생성**
> 
- **base64 문자열로 변환 - getB64Json( ) 메소드**
    
    모델을 호출하고 받은 응답에서 이미지 객체를 얻어 base64 문자열로 변환
    

> **이미지 편집**
> 

Spring AI는 기본적으로 이미지 생성만 지원하고 이미지 편집은 지원하지 않음.

따라서 직접 OpenAI API key를 이용해야 함. → @Value 어노테이션으로 환경변수 선언

- **WebClient 객체 생성**
    
    OpenAI의 API를 이용하기 위해 앤드포인트를 설정하고, 헤더를 추가하고, 메모리 사이즈를 늘리는  WebClient를 생성
    
- **MultiValueMap**
    
    하나의 key에 여러 개의 value를 저장할 수 있는 Map 타입
    
    문자파트와 파일파트를 저장하여 이미지 모델 옵션을 설정
    
- **Mono**
    
    비동기로 여러 이미지 요청 → Flux
    
    Mono는 비동기로 이미지 하나를 요청
    
    *retrieve( ): 서버로 실제 요청을 보내고 응답을 받음