# 비전과 멀티모달 LLM

## 컴퓨터 비전
기계가 주변 세계를 보고 해석하도록 만드는 기술.  
이미지 분석, 객체 탐지, 상태 인식 등에 사용된다.

## 멀티모달
텍스트, 이미지, 오디오, 비디오 등 다양한 형태의 데이터를 동시에 입력받고  
통합적으로 처리하는 AI 모델의 능력.

---

# Spring AI 멀티모달 지원

### 이미지 분석
- 텍스트와 이미지를 함께 입력하여 분석 가능  
- `SystemMessage`, `UserMessage`, `Media` 사용  
- 결과는 `Flux<String>` 형태로 스트리밍 응답

---

# 이미지 생성형 모델

### 특징
- 텍스트 프롬프트 기반 이미지 생성  
- `ImageModel` 사용  
- 결과는 Base64 형식으로 반환  
- URL 또는 Base64로 브라우저에서 표시 가능

### 구성 요소
- `ImageMessage`: 프롬프트와 가중치 설정  
- `ImageOptions`: 모델명, 크기, 품질 등 옵션 지정  
- `ImagePrompt`: 메시지 리스트와 옵션 결합  
- `ImageResponse`: 결과 이미지 리스트 반환

---

# 이미지 편집

### 개요
기존 이미지를 기반으로 특정 부분을 수정, 추가, 변형할 수 있다.  
예) “고양이 모자를 추가해줘”, “지브리풍으로 바꿔줘”

### 주요 구성
- `originalImage`: 원본 이미지  
- `maskImage`: 수정할 영역을 표시한 마스크  
- `prompt`: 편집 지시 문장  
- `WebClient`를 사용한 비동기 요청  
- 응답은 `Mono<OpenAIImageEditResponse>` 형태로 수신

### 처리 흐름
1. 한글 프롬프트를 영어로 번역  
2. `ByteArrayResource`로 이미지 파일 변환  
3. 파일명과 Content-Type 지정  
4. OpenAI API에 전송 후 Base64 이미지 결과 반환

---

# 마스크 드로잉

- 이미지 위에 드래그하여 편집 영역 지정  
- 이미지와 캔버스 크기를 동일하게 유지  
- `initCanvas`, `resizeCanvas`로 자동 크기 조정  
- 선택 영역은 반투명 박스로 표시

---

# 요약

| 기능 | 설명 |
|------|------|
| 멀티모달 비전 | 텍스트 + 이미지 입력 기반 분석 |
| 이미지 생성 | 텍스트 프롬프트 기반 생성 |
| 이미지 편집 | 마스크를 이용한 부분 수정 및 변형 |
| 캔버스 조작 | 이미지 위 영역 선택 가능 |
| 비동기 처리 | `Mono`, `Flux`, `WebClient` 사용 |
